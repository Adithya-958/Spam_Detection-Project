<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Prediction result</title>
		<style>
			body { font-family: Arial, Helvetica, sans-serif;  }
			
			.spam { color: #c92a2a; }
			.ham { color: #2a9d2a; }
			.meta { color: #666; font-size: 0.9rem; }
		</style>
	</head>
	<body>
		<div class="card" role="main" aria-live="polite">
			{% if error %}
				<h2>Error</h2>
				<p class="meta">{{ error }}</p>
				<p><a href="/">Go back</a></p>
			{% else %}
				<h2>Prediction result</h2>
				<section>
					<dl>
						<dt>Message</dt>
						<dd><pre>{{ message }}</pre></dd>
						<dt>Label</dt>
						<dd><strong class="{{ 'spam' if label=='spam' else 'ham' }}">{{ label|upper }}</strong></dd>
						<dt>Confidence</dt>
						<dd>{{ proba }}%</dd>
					</dl>
				</section>
				{% if trained_at %}
				<p class="meta">Model trained at: {{ trained_at }}</p>
				{% endif %}
				{% if model_accuracy %}
				<p class="meta">Model accuracy: {{ model_accuracy }}%</p>
				{% endif %}
				<p class="meta">Note: Confidence is based on message features. Model accuracy is from training.</p>
				<p><a href="/">Try another message</a></p>
				{% if doc_id %}
					<hr />
					<h3>Was this prediction correct?</h3>
					<form method="post" action="/confirm">
						<input type="hidden" name="doc_id" value="{{ doc_id }}" />
						<label for="confirmed_label">Correct label:</label>
						<select name="confirmed_label" id="confirmed_label">
							<option value="spam" {% if label=='spam' %}selected{% endif %}>Spam</option>
							<option value="ham" {% if label=='ham' %}selected{% endif %}>Ham</option>
						</select>
						<button type="submit">Submit feedback</button>
					</form>
				{% endif %}
			{% endif %}
		</div>
	</body>
	</html>
